<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <title>Contact Information - Berbagi Tiket</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Grand+Hotel" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>
<body>
  <div class="navbar-fixed">
    <nav class="light-blue lighten-1" role="navigation">
      <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo font-navbar">Berbagi Tiket</a>
        <ul class="right hide-on-med-and-down">
          <li><a href="#">Back</a></li>
        </ul>

        <ul id="nav-mobile" class="side-nav">
          <li><a href="#">Back</a></li>
        </ul>
        <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
      </div>
    </nav>
  </div>
  <div class="section no-pad-bot" id="index-banner">
    <div class="container">
      <br><br>
      <h5 class="header center orange-text">Contact Information</h5>
      <div class="row center">
        <form class="col s8 offset-s2">
          <div class="row center">
            <div class="input-field col s12">
              <select id="select-title">
                <option value="" disabled selected>Choose your Title</option>
                <option value="Mr.">Mr.</option>
                <option value="Mrs.">Mrs.</option>
                <option value="Ms.">Ms.</option>
              </select>
              <label>Title</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s6">
              <input id="first_name" type="text" class="validate">
              <label for="first_name">First Name</label>
            </div>
            <div class="input-field col s6">
              <input id="last_name" type="text" class="validate">
              <label for="last_name">Last Name</label>
            </div>
          </div>
          <div class="row center">
            <div class="input-field col s12">
              <i class="material-icons prefix">email</i>
              <input id="icon_email" type="tel" class="validate">
              <label for="icon_email">Email</label>
            </div>
          </div>
          <div class="row center">
            <div class="input-field col s12">
              <i class="material-icons prefix">phone</i>
              <input id="icon_telephone" type="tel" class="validate" data-length="13">
              <label for="icon_telephone">Telephone</label>
            </div>
          </div>
          <div class="row center">
            <div class="input-field col s12">
              <i class="material-icons prefix">date_range</i>
              <input id="icon_calendar" type="date" class="datepicker" class="validate">
              <label for="icon_calendar">Birthdate</label>
            </div>
          </div>
          <div class="row center">
            <div class="input-field col s12">
              <i class="material-icons prefix">info</i>
              <input id="icon_airline" type="tel" class="validate" value="ABC" readonly="true">
              <label for="icon_airline">Airline</label>
            </div>
          </div>
          <div class="row center">
            <div class="input-field col s12">
              <i class="material-icons prefix">info</i>
              <input id="icon_flightnumber" type="tel" class="validate" value="ABC" readonly="true">
              <label for="icon_flightnumber">Flight Number</label>
            </div>
          </div>
          <div class="row center">
            <div class="input-field col s12">
              <i class="material-icons prefix">info</i>
              <input id="icon_price" type="tel" class="validate" value="ABC" readonly="true">
              <label for="icon_price">Price</label>
            </div>
          </div>
          <div class="row center">
            <div class="input-field col s12">
              <select id="payment">
                <option value="" disabled selected>Choose your payment method</option>
                <option value="Transfer">Transfer</option>
                <option value="Credit Card">Credit Card</option>
                <option value="Paypal">Paypal</option>
              </select>
              <label>Payment Methods</label>
            </div>
          </div>
        </form>
      </div>
      <div class="row center">
        <a href="#" id="download-button" class="btn-large waves-effect waves-light orange" onclick="submit()">Submit</a>
      </div>
      <br><br>

    </div>
  </div>

  <footer class="page-footer orange">
    <div class="footer-copyright">
      <div class="container">
      Made by <a class="orange-text text-lighten-3" href="http://materializecss.com">Berbagi Tiket</a>
      </div>
    </div>
  </footer>

  <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/init.js"></script>
  <script type="text/javascript">
    $('.datepicker').pickadate({
      selectMonths: true, // Creates a dropdown to control month
      selectYears: 15 // Creates a dropdown of 15 years to control year
    });

    $(document).ready(function() {
    $('select').material_select();
  });


      $(document).ready(function(){
            key = localStorage.key(0);
            var dataPesawat = JSON.parse(localStorage.getItem(key))
            $("#icon_airline").val(dataPesawat['data-airlinesname'])
            $("#icon_flightnumber").val(dataPesawat['data-airlines'])
            $("#icon_price").val(dataPesawat['data-price'])

      })
      function submit(){
        $.ajax({
          url  : "http://localhost:3000/api/transactions/new",
          type : "POST",
          data: {
            title: $('#select-title').val(),
            firstname : $('#first_name').val(),
            lastname : $('#last_name').val(),
            email   : $('#icon_email').val(),
            phone   : $('#icon_telephone').val(),
            birthdate   : $('#icon_calendar').val(),
            airline   : $('#icon_airline').val(),
            flightnumber   : $('#icon_flightnumber').val(),
            price   : $('#icon_price').val(),
            payment   : $('#payment').val(),
          },
          success: function(result) {
              alert("Transaksi Sukses || Berbagi Tiket Butuh Funding")
          }
        })
      }
  </script>
  </body>
</html>
